const responses = require('../../data/responses.json');
const messages = [
    {
        range: [0, 0], messages: [
            "ÐžÐ¹, Ð½ÐµÑ‚-Ð½ÐµÑ‚, ÑÑ‚Ð¾Ð³Ð¾ Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð½Ðµ ÑÐ»ÑƒÑ‡Ð¸Ñ‚ÑÑ, Ð´Ð°Ð¶Ðµ Ð½Ðµ Ð¼ÐµÑ‡Ñ‚Ð°Ð¹!",
            "Ð­Ñ‚Ð¾ Ð²Ð¾Ð¾Ð±Ñ‰Ðµ Ð½Ðµ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚, Ð·Ð°Ð±ÑƒÐ´ÑŒ Ð¾Ð± ÑÑ‚Ð¾Ð¼!"
        ]
    },
    {
        range: [1, 30], messages: [
            "Ð¨Ð°Ð½Ñ Ð¼Ð°Ð», Ð½Ð¾ Ð²Ð´Ñ€ÑƒÐ³... ÐºÑ‚Ð¾ Ð·Ð½Ð°ÐµÑ‚?",
            "Ð­Ñ‚Ð¾ ÐºÐ°Ðº Ð²Ñ‹Ð¸Ð³Ñ€Ð°Ñ‚ÑŒ Ð² Ð»Ð¾Ñ‚ÐµÑ€ÐµÑŽ, Ð½Ð¾ Ð²ÑÑ‘ Ð¶Ðµ ÑˆÐ°Ð½Ñ ÐµÑÑ‚ÑŒ!",
            "ÐÐ¸Ð·ÐºÐ¸Ðµ ÑˆÐ°Ð½ÑÑ‹, Ð½Ð¾ Ð½Ð¸ÐºÐ¾Ð³Ð´Ð° Ð½Ðµ Ð³Ð¾Ð²Ð¾Ñ€Ð¸ Ð½Ð¸ÐºÐ¾Ð³Ð´Ð°!"
        ]
    },
    {
        range: [30, 49], messages: [
            "Ð¨Ð°Ð½Ñ ÐµÑÑ‚ÑŒ, Ð½Ð¾ Ð½Ðµ ÑÐ»Ð¸ÑˆÐºÐ¾Ð¼ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹. ÐÐ°Ð´ÐµÐ¶Ð´Ð° ÑƒÐ¼Ð¸Ñ€Ð°ÐµÑ‚ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¹!",
            "ÐœÐ¾Ð¶ÐµÑ‚ ÑÑ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ, ÐµÑÐ»Ð¸ Ð·Ð²Ñ‘Ð·Ð´Ñ‹ ÑÐ¾Ð¹Ð´ÑƒÑ‚ÑÑ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾!",
            "ÐÐµ ÑÐ°Ð¼Ñ‹Ð¹ Ð»ÑƒÑ‡ÑˆÐ¸Ð¹ ÑˆÐ°Ð½Ñ, Ð½Ð¾ Ð¸ Ð½Ðµ Ñ…ÑƒÐ´ÑˆÐ¸Ð¹. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹!"
        ]
    },
    {
        range: [50, 50], messages: [
            "ÐŸÐ¾Ð»Ñ‚Ð¾Ñ€Ð° ÑˆÐ°Ð³Ð° Ð²Ð¿ÐµÑ€Ñ‘Ð´, Ð¿Ð¾Ð»ÑˆÐ°Ð³Ð° Ð½Ð°Ð·Ð°Ð´, Ñ‚ÑƒÑ‚ ÐºÐ°Ðº Ñ Ð¼Ð¾Ð½ÐµÑ‚ÐºÐ¾Ð¹ â€” Ð¾Ñ€Ñ‘Ð» Ð¸Ð»Ð¸ Ñ€ÐµÑˆÐºÐ°!",
            "ÐœÐ¾Ð¶ÐµÑ‚ ÑÐ»ÑƒÑ‡Ð¸Ñ‚ÑŒÑÑ, Ð° Ð¼Ð¾Ð¶ÐµÑ‚ Ð¸ Ð½ÐµÑ‚, Ð²ÑÑ‘ ÐºÐ°Ðº Ð½Ð° ÐºÐ°Ñ‡ÐµÐ»ÑÑ… â€” Ñ‚ÑƒÐ´Ð°-ÑÑŽÐ´Ð°!"
        ]
    },
    {
        range: [51, 70], messages: [
            "Ð¨Ð°Ð½ÑÑ‹ Ð½ÐµÐ¿Ð»Ð¾Ñ…Ð¸Ðµ, Ð½Ð¾ Ð²ÑÑ‘ ÐµÑ‰Ñ‘ ÐµÑÑ‚ÑŒ Ð¼ÐµÑÑ‚Ð¾ Ð´Ð»Ñ ÑÑŽÑ€Ð¿Ñ€Ð¸Ð·Ð¾Ð²!",
            "ÐŸÐ¾Ñ…Ð¾Ð¶Ðµ, Ñ‡Ñ‚Ð¾ Ð²ÑÑ‘ Ð¸Ð´Ñ‘Ñ‚ Ð² Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¼ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¸!",
            "ÐÐµ Ñ€Ð°ÑÑÐ»Ð°Ð±Ð»ÑÐ¹ÑÑ, Ð½Ð¾ ÑƒÑÐ¿ÐµÑ… Ð²Ð¿Ð¾Ð»Ð½Ðµ Ñ€ÐµÐ°Ð»ÐµÐ½!"
        ]
    },
    {
        range: [71, 80], messages: [
            "ÐžÑ‡ÐµÐ½ÑŒ Ð¿Ð¾Ñ…Ð¾Ð¶Ðµ, Ñ‡Ñ‚Ð¾ Ð²ÑÑ‘ ÑÐ»Ð¾Ð¶Ð¸Ñ‚ÑÑ ÐºÐ°Ðº Ð½Ð°Ð´Ð¾!",
            "Ð¨Ð°Ð½ÑÑ‹ Ð²Ñ‹ÑÐ¾ÐºÐ¸, Ð½Ð¾ Ñ‡ÑƒÑ‚ÑŒ-Ñ‡ÑƒÑ‚ÑŒ Ð¾ÑÑ‚Ð¾Ñ€Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸ Ð½Ðµ Ð¿Ð¾Ð¼ÐµÑˆÐ°ÐµÑ‚!",
            "ÐŸÐ¾Ñ‡Ñ‚Ð¸ Ð½Ð°Ð²ÐµÑ€Ð½ÑÐºÐ°, Ð½Ð¾ Ð´ÐµÑ€Ð¶Ð¸Ð¼ Ð¿Ð°Ð»ÑŒÑ†Ñ‹ ÑÐºÑ€ÐµÑ‰Ñ‘Ð½Ð½Ñ‹Ð¼Ð¸!"
        ]
    },
    {
        range: [81, 99], messages: [
            "Ð’Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ ÐºÐ°Ðº Ð±ÑƒÐ´Ñ‚Ð¾ Ð²ÑÑ‘ ÑƒÐ¶Ðµ Ñ€ÐµÑˆÐµÐ½Ð¾, Ð½Ð¾ Ð´Ð°Ð²Ð°Ð¹ Ð½Ðµ Ð±ÑƒÐ´ÐµÐ¼ ÑÐ¿ÐµÑˆÐ¸Ñ‚ÑŒ Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°Ð¼Ð¸!",
            "Ð¨Ð°Ð½ÑÑ‹ Ñ‚Ð°ÐºÐ¸Ðµ Ð²Ñ‹ÑÐ¾ÐºÐ¸Ðµ, Ñ‡Ñ‚Ð¾ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¾Ñ‡Ñ‚Ð¸ Ð¿Ñ€Ð°Ð·Ð´Ð½Ð¾Ð²Ð°Ñ‚ÑŒ, Ð½Ð¾ Ð´ÐµÑ€Ð¶Ð¸Ð¼ ÐºÑƒÐ»Ð°Ñ‡ÐºÐ¸!"
        ]
    },
    {
        range: [100, 100], messages: [
            "Ð­Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð¸Ð·Ð¾Ð¹Ð´Ñ‘Ñ‚ Ð±ÐµÐ· Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð²!",
            "Ð“Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾! ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ð¶Ð´Ð¸ Ð¸ Ð½Ð°ÑÐ»Ð°Ð¶Ð´Ð°Ð¹ÑÑ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚Ð¾Ð¼!",
            "Ð¡Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¶Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ð¾Ð² Ð¿Ð¾Ð½Ð¸Ð¼Ð°Ð½Ð¸Ñ. Ð˜ Ð½Ð¸ÐºÐ°ÐºÐ¾Ð³Ð¾ Ð¾ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ñ."
        ]
    }
];


module.exports = async (context) => {
    try {
        const chance = Math.floor(Math.random() * 101);

        const group = messages.find(({ range }) => chance >= range[0] && chance <= range[1]);

        const randomMessage = group.messages[Math.floor(Math.random() * group.messages.length)];

        const response = `ðŸ”® Ð¨Ð°Ð½Ñ: ${chance}%\n${randomMessage}`;

        context.send(response, {
            forward: JSON.stringify({
                peer_id: context.peerId,
                conversation_message_ids: [context.conversationMessageId],
                is_reply: 1,
            })
        });
    } catch (err) {
        console.error(`[ERR] ${err}`);
        context.send(responses.errors.default);
    }
};
